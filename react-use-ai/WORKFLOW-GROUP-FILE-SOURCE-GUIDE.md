# 工作流组文件来源功能说明

## 功能概述
基于BatchProcessForm中的文件来源功能，为工作流组增加了智能批量创建功能，用户可以通过多选文件+工作流组模板来批量创建工作流组。

## 核心功能

### 1. 文件来源管理
- **添加文件来源**: 支持添加多个文件来源路径
- **文件类型过滤**: 支持按文件类型（如.js, .ts, .tsx等）过滤
- **自动文件提取**: 调用API自动提取指定目录下的文件列表
- **可视化管理**: 提供直观的文件来源管理界面

### 2. 智能批量创建工作流组
- **模板选择**: 从已有的工作流组模板中选择
- **文件多选**: 从提取的文件列表中多选文件
- **命名模式**: 支持自定义命名模式，使用占位符如`{fileName}`
- **描述模板**: 支持描述模板，可使用`{fileName}`, `{sourcePath}`等占位符
- **文件引用替换**: 自动替换模板中的文件路径占位符

### 3. 文件路径占位符支持
在工作流模板中，支持以下占位符的自动替换：
- `{{文件名}}` 或 `{{fileName}}`: 替换为文件名
- `{{sourcePath}}`: 替换为源代码路径  
- `{{filePath}}`: 替换为完整文件路径

## 使用流程

### 步骤1: 配置文件来源
1. 点击"智能批量创建"按钮
2. 在文件来源区域点击"添加文件来源"
3. 输入源代码根目录路径
4. 输入文件类型过滤条件（如`.js,.ts,.tsx`）
5. 点击"提取"按钮获取文件列表

### 步骤2: 选择模板和文件
1. 从下拉框中选择工作流组模板
2. 从文件列表中多选需要创建工作流组的文件
3. 可选：设置自定义命名模式（如`{fileName}-工作流`）
4. 可选：设置描述模板

### 步骤3: 批量创建
1. 点击"智能批量创建"按钮
2. 系统将为每个选中的文件创建一个工作流组
3. 自动替换模板中的文件路径占位符
4. 显示创建结果

## 技术实现

### 文件来源管理
```typescript
interface FileSource {
  id: string;
  path: string;
  fileType: string;
  files: string[];
  loading: boolean;
}
```

### 核心创建逻辑
- 为每个选中文件生成唯一的工作流组
- 自动处理文件名大驼峰命名转换
- 智能替换模板中的占位符
- 保持工作流模板结构完整性

### API集成
- 使用`/api/list-files`接口提取文件列表
- 使用`/api/multi-stream/save`接口保存工作流组配置
- 支持错误处理和状态反馈

## 优势特点

1. **高效批量操作**: 一次性为多个文件创建工作流组
2. **模板复用**: 基于现有模板，确保工作流结构一致性
3. **智能命名**: 自动从文件名生成合适的工作流组名称
4. **路径替换**: 自动处理文件路径引用，无需手动配置
5. **用户友好**: 直观的UI界面，操作简单明了

## 使用场景

- **代码转换项目**: 批量处理多个源代码文件
- **文档生成**: 为多个文档文件创建处理工作流
- **批量分析**: 对多个文件进行相同的分析流程
- **模板应用**: 将标准工作流模板应用到多个文件

这个功能大大提升了工作流组的创建效率，特别适合需要处理大量相似文件的场景。